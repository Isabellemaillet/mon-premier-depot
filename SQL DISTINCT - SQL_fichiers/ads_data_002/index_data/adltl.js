var adlCreative=function(){var t=this;return t.state=0,t.readyStack=[],t.images={},t.fonts={},t.orphans={},t.rules={},t};window._$=adlCreative,_$.fn=_$.prototype,window._adl=_$,_$.fn.init=function(t){t=t||{};var e=$.d,n=this;n.state="init",$.log("Init"),n.sheet=$.makeSheet(),t="string"==typeof t?JSON.parse(atob(t)):t,n.size=t.size,n.format=t.formatid||"1",n.clickTags=t.clickTags||{main_exit:"Default Landing Page"},n.version_data=t.version_data||{},n.objcount=+new Date,n.responsive=t.responsive||0,n.obj=t.obj||{},$.dict=t.dict||{},n.prep(t);var i=n.orphans;if(t.obj)for(var r in t.obj)if(t.obj.hasOwnProperty(r)){var a=$.mkObject(r,t.obj[r]);if("adl--stage"==r&&(a.style.opacity=0,n.stage=a,$(a).style(t.size)),i&&i[r]){for(var s,o=[],f=0;f<i[r].length;f++)a.firstChild.appendChild(i[r][f]),o.push(i[r][f].dataset.key);for(var l in o){o.hasOwnProperty(l)&&(s=o[l],$.undef(n.obj[s].zorder)||$(n.obj[s].elnode).zorder(n.obj[s].zorder))}delete i[r]}}for(r in i){for(f=0;f<i[r].length;f++)$(i[r][f]).parent("adl--stage");delete i[r]}for($(n.stage).addClass(n.format),n.mo=0,$(n.stage).on("mouseover",function(){$.cr.mo||(this.parentNode.classList.add("mouseover"),EvBus.send("mouseover")),$.cr.mo++}).on("mouseout",function(){$.cr.mo--,$.cr.mo||(this.parentNode.classList.remove("mouseover"),EvBus.send("mouseout"))}),e.body.appendChild(n.stage),$(e.body).on("click",$.exit),$.log("Preparing!");n.readyStack.length;)n.readyStack.shift().call();$.log("On-Load Scripts Executed...!"),n._waitload()},_$.fn._waitload=function(){$.okeys($.cr.images).length?setTimeout($.cr._waitload,25):$.cr._ready()},_$.fn._ready=function(){EvBus.send("ready"),!(this.state="Ready")!==this.autoplay&&this.run()},_$.fn.getVersionData=function(t){return this.version_data[t]},_$.fn.versionData=function(t,e){if($.undef(e))return this.version_data[t]||"";this.version_data[t]=e},_$.fn.prop=function(t,e){if($.undef(e))return this[t];this[t]=e},_$.fn.getStage=function(){return this.stage},_$.fn.getObjData=function(t){return this.obj[t]};var adl=function(t){return new adlayer(t)},adlayer=function(t){var e=this;if(!(e instanceof adlayer))return new adlayer(t);if(e.length=0,e.nodes=[],t instanceof HTMLElement?e.nodes=[t]:t instanceof NodeList?e.nodes=1<t.length?[].slice.call(t):[t]:"string"==typeof t&&(e.nodes=[].slice.call($.d.querySelectorAll(t))),e.nodes.length){e.length=this.nodes.length;for(var n=0;n<e.nodes.length;n++)e[n]=e.nodes[n]}return e};adl.fn=adlayer.prototype,window.adl=adl,window.$=adl,void 0!==adlCreative&&($.cr=new adlCreative),$.d=document,$.undef=function(t){return void 0===t},$.pf=window.parseFloat,$.okeys=function(t){return Object.keys(t)},$.log=function(t){},$.now=function(){return+Date.now()},$.gc=function(t){return t.firstChild},$.ac=function(t,e){t.appendChild(e)},$.pfx=function(){var t=window.getComputedStyle($.d.documentElement,"");return $.undef(t.animation)?"-webkit-":""}(),$.ruleIndex={obj:"",ct:">.adl-obj-content"},$.ctstyles=["border-style","border-color","border-width","border-radius","padding","background-color","background-position","opacity"],$.dict={},$.isIE=function(){return"Microsoft Internet Explorer"==navigator.appName||!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/rv:11/))||!1},$.cssify=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},$.vd=function(t,e){return $.cr.versionData(t,e)},$.fn.map=function(t){for(var e=[],n=0;n<this.length;n++)e.push(t.call(this[n],this,n));return e},$.fn.each=function(t){return this.map(t),this},$.apply=function(){for(var t={},e=0;e<arguments.length;e++)t=$.assign(t,arguments[e]||{});return t},$.assign=function(t,e,n){for(var i in e)e.hasOwnProperty(i)&&("object"!=typeof e[i]||Array.isArray(e[i])?t[i]=e[i]:n&&isEmpty(e[i])&&t[i]?delete t[i]:("object"!=typeof t[i]&&(t[i]={}),t[i]=$.assign(t[i]||{},e[i],n)));return t},$.makeSheet=function(){var t=this.mkKey(),e=$.mkEl("style");for(var n in e.type="text/css",e.title=t,$.ac($.d.head,e),$.d.styleSheets)if($.d.styleSheets[n].title==t)return $.d.styleSheets[n];return!1},$.mkEl=function(t){return t=t||"div",$.d.createElement(t)},$.fn.el=function(t,e){return t?$.undef(e)?this[0][t]:void(this[0][t]=e):this[0]},$.fn.copyEl=function(t,e){return e=e||!1,this.each(function(){$.ac(t,this.cloneNode(e))})},$.get=function(t){return $.cr.obj[t]?$('.adl-obj[data-key="'+t+'"]'):$(t)},$.select=function(t){return"#"==t[0]?$.d.getElementById(t.substr(1)):$(t)[0]},$.fn.rmEl=function(){return this.remove()},$.fn.remove=function(){return this.each(function(){var t=this.dataset.key;t?$.cr.removeObject(t):this.parentNode.removeChild(this)})},$.fn.parent=function(t){if($.undef(t))return $.getObj(this[0].parentNode);var e,n;if("number"==typeof t||"string"==typeof t){if(t=parseInt(t)||t,e=$.get(t),$(this[0]).data("group",t),!e.length){var i=$.cr.getObjData(t,1);if(!i||!i.elnode){var r=$.cr.orphans;return r[t]||(r[t]=[]),r[t].push(this[0]),this}e=$(i.elnode)}}else t instanceof HTMLElement&&(n=(e=$(t)).key(),this[0].dataset.group=n);return e.length&&$.ac($.gc(e[0]),this[0]),this},$.fn.children=function(t){if($.undef(t))return-1<["group","stage","container"].indexOf(this.type())?this.ctNode(1).childNodes:[];for(var e in t){var n;t.hasOwnProperty(e)&&(t[e].key=e,(n=$.mkObject(t[e])).dataset.group=this[0].id,$.ac($.gc(this[0]),n))}},$.fn.find=function(t){var e=this.map(function(){return[].slice.call(this.querySelectorAll(t))}),n=$();if(e.forEach(function(t){t.forEach(function(t){n.nodes.push(t)})}),n.nodes.length){n.length=n.nodes.length;for(var i=0;i<n.nodes.length;i++)n[i]=n.nodes[i]}return n},$.mkKey=function(){return $._keyb||($._keyb=+new Date),$._keyb++},$.mkObject=function(t,e,n){var i=e.type;if(i){$.cr.obj[t]={};var r=$.mkEl("div");r.dataset.key=t,$.cr.obj[t].elnode=r;var a=$(r);return a.addClass("adl-obj adl-obj-"+i+" adl-obj-"+t),"function"==typeof $.fn["mkObj_"+i]?$.fn["mkObj_"+i](a):$.addCtNode(a),"adl--stage"!==t&&(e.parent=e.parent||"adl--stage",n||$.undef($.vd(t))||(e[i]=$.vd(t))),this.build(a,e),r}return $.log("Error! Unknown object type."),!1},$.build=function(t,e,n){e.parent&&t.parent(e.parent);var i,r=e.type;for(var a in e){e.hasOwnProperty(a)&&"parent"!==a&&a!==r&&(i=e[a],"function"==typeof t[a]?t[a](i,n):$.log("Error! Unknown parameter: "+a))}e[r]&&"function"==typeof t[r]&&t[r](e[r])},$.addCtNode=function(t){var e=$.mkEl();$.ac(t[0],e),$(e).addClass("adl-obj-content")},$.fn.ctNode=function(t){var e=$.gc(this[0]);return t?e:$(e)},$.getObj=function(t){if($(t).hasClass("adl-creative"))return!1;for(;t&&!$(t).hasClass("adl-obj");){if(!t.parentNode)return!1;t=t.parentNode}return t},$.fn.key=function(){return this[0].dataset.key},$.fn.id=function(t,e){var n=$.cr.obj;"id"!==t&&(e=t);var i=this.key();return $.undef(e)?i&&n[i]?n[i].id||"":this[0].id:(this[0].id=e,n[i].id=e,this)},$.fn.type=function(t){var e=$.cr.obj;if($.undef(t)){var n=this.key();return!(!n||!e[n])&&e[n].type}return this.each(function(){e[$(this).key()].type=t})},$.fn.attr=function(t,e){if($.undef(e)&&"string"==typeof t){var n=$.cr.getObjData([this.key()]);return n.attr=n.attr||{},n.attr[t]}var r={};return"object"!=typeof t?r[t]=e:r=t,this.each(function(){var t=$(this),e=$.cr.getObjData([t.key()]);e.attr=e.attr||{};var n=e.attr;for(var i in r)n[i]=r[i],$.gc(this)[i]=r[i]})},$.fn.adlcls=function(t,r){if("string"==typeof t&&$.undef(r)){var e=this.key();return($.cr.getObjData(e).adlcls||{})[t]||!1}var a;return"string"==typeof t&&"string"==typeof r?(a=r,(r={})[t]=a):r=t,this.each(function(){var t=adl(this),e=t.key(),n=$.cr.getObjData(e);for(var i in n.adlcls=n.adlcls||{},r)r.hasOwnProperty(i)&&((a=n.adlcls[i])&&t.rmClass("adl-"+a),n.adlcls[i]=r[i],t.addClass("adl-"+n.adlcls[i]))})},$.fn.objcls=function(t,e){var n=$.cr.obj;if("objcls"!==t&&(e=t),$.undef(e))return n[this.key()].objcls||"";var i=e.split(" ");for(var r in i)i[r].length&&this[0].classList.add(i[r]);return n[this.key()].objcls=e,this},$.fn.addClass=function(t){var n=t.split(" ");return this.each(function(){var e=this;n.forEach(function(t){t.length&&e.classList.add(t)})})},$.fn.rmClass=function(t){var n=t.split(" ");return this.each(function(){var e=this;n.forEach(function(t){e.classList.remove(t)})})},$.fn.hasClass=function(t){return this[0].classList.contains(t)},$.fn.toggleClass=function(t){var n=t.split(" ");return this.each(function(){var e=this;n.forEach(function(t){e.classList.toggle(t)})})},$.mkCSS=function(e,t){var n=$.cr.sheet;if("object"==typeof t){var i="",r="";for(var a in t){var s=$.cssify(a);r+=s.replace(/transform/g,"-webkit-transform").replace(/animation/g,"-webkit-animation")+": "+t[a]+";",r+=s+": "+t[a]+";",i+=s+": "+t[a]+";"}var o=e+" {"+r+"}";try{n.insertRule(o,n.cssRules.length)}catch(t){o=e+" {"+i+"}",n.insertRule(o,n.cssRules.length)}}else o=e+" {"+(t=t||"")+"}",n.insertRule(o,n.cssRules.length);return $.cr.sheet.cssRules[$.cr.sheet.cssRules.length-1]},$.fn.css=function(e,n){$.undef(n)||(n=":"+n),n=n||"",this.each(function(){var t=$.gc(this).tagName;$.mkCSS("#"+this.id+n+">"+t,e)})},$.pixPerc=function(t,e,n){var i=$.pf(t);return-1<t.indexOf("%")?(i=(n=$.pf(n))*(i/100)+e,$.pf((i/n*100).toFixed(3))+"%"):$.pf((i+e).toFixed(3))+"px"},$.fn.zorder=function(a,t){return("number"==typeof a||!$.undef(t))&&this.each(function(){var t,e=this,n=e.parentNode;if("number"==typeof a&&($.cr.getObjData(e.dataset.key).zorder=a),n)switch(a){case"bottom":n.insertBefore(e,$.gc(n));break;case"down":(t=e.previousSibling)&&n.insertBefore(e,t);break;case"up":(t=e.nextSibling)&&(t.nextSibling?n.insertBefore(e,t.nextSibling):$.ac(n,e));break;case"top":$.ac(n,e);break;default:e.dataset.z=a;for(var i=$.gc(n),r=0;i&&!r;)parseInt(i.dataset.z)>parseInt(a)?(n.insertBefore(e,i),r=!0):i=i.nextSibling;r||$.ac(n,e)}})},$.hash=function(t){var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n);e&=e}return Math.abs(e)},$.mkKeyframes=function(t,e){var n="";if("string"!=typeof e)for(var i in e)n+=i+" {"+e[i]+"} ";else n=e;var r="@"+$.pfx+"keyframes "+t+" {"+n+"}",n=n.replace(/transform/g,$.pfx+"transform").replace(/animation/g,$.pfx+"animation");try{$.cr.sheet.insertRule(r,$.cr.sheet.cssRules.length)}catch(t){}},$.fn.clicktag=function(t,e){if(t=t||"main_exit",$.undef(e))return $.vd(t)||"";$.vd(t,e)},$.exit=function(t){"string"!=typeof t&&(t=!1),t=t||"main_exit",t=$.vd(t)||"",$.log("Exit to: "+t),$.adserver.exit(t),$.cr.stop(),EvBus.send("exit")},$.fn.scripts=function(o){return this.each(function(){var t=$(this),e=t.key(),n=$.cr.obj[e];n.scripts=n.scripts||{};var i="_stage=$($.cr.stage);";for(var r in o){var a,s=atob(o[r]).trim();s.length&&("__adlready"==r?(a="_this=$('#"+t.id()+"');"+i+s,$.cr.readyStack.push(new Function(a))):(a="e.stopPropagation();_this=$(this);"+i+s,n.scripts[r]=new Function("e",a),t.on(r,n.scripts[r])))}})},$.fn.mkObj_stage=function(t){t.addClass("adl--stage"),$.addCtNode(t);var e=$.mkEl();e.className="adl--stage-curtain",$.ac(t[0],e),$.ruleIndex.stage="",$.ruleIndex.curtain=">.adl--stage-curtain"},$.fn.flow=function(n,t){if("flow"==n&&(n=t),$.undef(n)){var e=this.key();return $.cr.obj[e].flow||"absolute"}return this.each(function(){var t=$(this),e=t.key();$.cr.obj[e].flow=n,t.rmClass("adl-inline adl-relative"),-1<["inline","relative"].indexOf(n)&&t.addClass("adl-"+n)})},$.fn.mkObj_text=function(t){$.ruleIndex.txt=" .adl-text",t[0].innerHTML='<div class="adl-text-boxw adl-obj-content"><div class="adl-text-box"><p class="adl-text adl-txtnode"></p></div></div>'},$.fn.mkObj_btext=function(t){$.ruleIndex.btxt=".adl-btext",t.addClass("adl-txtnode adl-btext")},$.fn.textNode=function(t){var e="adl-txtnode",n=this[0].classList.contains(e)?this[0]:this.find("."+e)[0];return t?n:$(n)},$.fn.btext=function(t,e){return this.text(t,e)},$.fn.text=function(t,n){return"text"!=t&&"btext"!=t&&(n=t),$.undef(n)?$.vd(this.key()):this.each(function(){var t=$(this),e=t.key();$.vd(e,n),t.textNode(1).innerHTML=n})},$.fn.font=function(t){if($.undef(t))return this.style("fontFamily");var e;t.css&&!$.cr.fonts[t.id]&&($.select("#"+t.id)||((e=$.mkEl("link")).rel="stylesheet",e.type="text/css",e.href=t.css,$.isIE()&&(e.href+=(e.href.indexOf("?")<0?"?":"&")+"adl="+Date.now()),e.id=t.id,$.ac($.d.head,e)),$.cr.fonts[t.id]=t),this.data("font_id",t.id||t),this.style("fontFamily",t.family||t)},$.fn.autoSize=function(){return this.each(function(){var t=100,e=$(this).textNode(1);for(e.parentNode.style.fontSize=t+"%";10<t&&(e.offsetHeight>this.offsetHeight||e.offsetWidth>this.offsetWidth);)t--,e.parentNode.style.fontSize=t+"%"})},$.fn.mkObj_svgshape=function(t){$.ruleIndex.svg=" path",t.el().innerHTML='<svg class="adl-obj-content" width="100%" height="100%" viewBox="0 0 120 120" preserveAspectRatio="none"><path/></svg>'},$.fn.svgshape=function(t,a){return"svgshape"!=t&&(a=t),$.undef(a)?$.vd(this.key()):(this.each(function(){var t,e,n,i,r=$(this);"svgshape"==r.type()&&($.vd(r.key(),a),e=t=120,3==(n=a.split(":")).length&&(t=n[0],e=n[1],a=n[2]),(i=$.gc(this)).setAttribute("viewBox","0 0 "+t+" "+e),$.gc(i).setAttribute("d",a))}),this)},$.fn.mkObj_video=function(t){var e=$.mkEl("video");e.className="adl-obj-content",e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),$.ac(t[0],e)},$.fn.video=function(t,e){return"video"!==t&&(e=t),$.undef(e)?JSON.parse($.vd(this.key())||"{}"):(this.each(function(){var t=$(this);"video"==t.type()&&("string"!=typeof e&&(e=JSON.stringify(e)),$.vd(t.key(),e),t.ctNode(1).src=e)}),this)},$.fn.videoplayer=function(){return this.find("video")[0]},$.fn.image=function(t,e){return"image"!=t&&(e=t),$.undef(e)?JSON.parse($.vd(this.key())||"{}"):(this.each(function(){var t=$(this);"image"==t.type()&&("string"!=typeof e&&(e=JSON.stringify(e)),$.vd(t.key(),e),t.loadImage())}),this)},$.fn.loadImage=function(){return this.each(function(){var t,e=$(this),n=e.key();try{var i=JSON.parse($.vd(n)).path}catch(t){i=$.vd(n)}i&&i.length?((t=new Image).dataset.key=n,t.src=i,$.cr.images[n]=1,t.onerror=function(){var t=$(this).key();$.log("Could not load image "+this.src),this.style.visibility="none",delete $.cr.images[t]},t.onload=function(){var t=$(this).key();delete $.cr.images[t]},$.gc(e[0]).style.backgroundImage="url("+i+")"):(this.style.visibility="none",delete $.cr.images[n])}),this},$.fn.on=function(t,e,n){return n=n||!1,this.each(function(){this.addEventListener(t,e,n)})},$.fn.off=function(t,e,n){return n=n||!1,this.each(function(){this.removeEventListener(t,e,n)})},$.fn.at=function(t,e){var n=Array.prototype.slice.call(arguments);n.splice(3,0,this),EvBus.add.apply(EvBus,n)};var AdlEventBus=function(){this.listeners={}};AdlEventBus.prototype={add:function(t,e,n){var i=3<(i=Array.prototype.slice.call(arguments)).length?i.splice(3,i.length-1):[];this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({scope:n,callback:e,args:i})}};var EvBus=new AdlEventBus;_$.fn.prep=function(t){var e=this;e.timer={start:0,init:0,trt:0,rt:0,run:function(){window.raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.raf(this.frame)},stop:function(){this.rfi&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame)(this.rfi)},frame:function(t){var e=$.cr.timer;e.tsloop=e.tsloop||t,e.tsstart=e.tsstart||t,e.trt=t-e.tsstart,e.rt=t-e.tsloop,$.cr.time=$.pf((e.rt/1e3).toFixed(1)),$.cr.runtime=$.pf((e.trt/1e3).toFixed(1)),EvBus.send("frame",1),e.rfi=window.raf(e.frame)}},e.timer.init=$.now(),e.runtime=0,e.timeline=$.apply({duration:20,endpoint:0,loops:1},t.timeline),e.loop=e.timeline.loops-1||0,e.time=0;var n=e.timeline;e.ctrlclass=$.mkCSS("*",{"animation-fill-mode":"forwards","animation-delay":"0s","animation-iteration-count":n.loops||"infinite"});var i=e.sheet.cssRules.length;e.sheet.insertRule("@"+$.pfx+"keyframes adlctrl {0% {opacity: 1;} 100% {opacity: 1;}}",i),"function"==typeof e.sheet.cssRules[i].appendRule?$.insRule="appendRule":$.insRule="insertRule";var r=document;r.addEventListener("animationend",function(t){"adlctrl"==t.animationName&&0<t.elapsedTime&&$.cr.end()}),r.addEventListener("animationiteration",function(t){"adlctrl"==t.animationName&&$.cr.doLoop()})},_$.fn.run=function(){var t=$.cr;if(!document.documentElement.clientWidth)return window.addEventListener("resize",t.run);window.removeEventListener("resize",t.run),$(t.stage).style("animation-name","adlctrl").find(".adl-obj").buildTLRules();var e,n=$(".adl-obj-text.adl-txtShrink");n.length&&((e=function(){n.autoSize()})(),setTimeout(e,500),setTimeout(e,1e3),setTimeout(e,3e3)),"Ready"==t.state&&setTimeout(function(){t.stage.style.opacity="",t.ctrlclass.style.setProperty($.pfx+"animation-duration",$.cr.timeline.duration+"s"),$(t.stage).find(".adl-obj").refreshAnimations(),t.timer.start=$.now(),EvBus.send("start"),t.play()},100)},_$.fn.goto=function(t){var e=this;$(e.stage);t<0?t=0:t>=e.timeline.duration-.1&&(t=e.timeline.duration-.1),t=$.pf(t.toFixed(1)),e.time=t,e.ctrlclass.style.setProperty($.pfx+"animation-delay","-"+t+"s"),e.stage.innerWidth},_$.fn.play=function(){$.cr.chkEnd(),$.cr.ctrlclass.style.setProperty($.pfx+"animation-play-state","running"),$.cr.timer.run()},_$.fn.stop=function(){$.cr.timer.stop(),$.cr.state="stop",$.cr.ctrlclass.style.setProperty($.pfx+"animation-play-state","paused"),EvBus.send("stop")},_$.fn.end=function(){"end"!==$.cr.state&&($.cr.timer.stop(),$.cr.ctrlclass.style.setProperty($.pfx+"animation-play-state","paused"),$.cr.state="end",EvBus.send("end"))},_$.fn.doLoop=function(){this.loop--,this.chkEnd(),this.timer.tsloop=0,EvBus.send("loop")},_$.fn.chkEnd=function(){var t=this.timeline;this.loop&&1!=t.loops||!t.endpoint||setTimeout(this.end,1e3*$.pf(t.endpoint))},_$.fn.getTL=function(){return this.timeline||(this.timeline={duration:20,loops:1}),this.timeline},_$.fn.getTimeData=function(){return{time:this.time,runtime:this.runtime,loop:this.timeline.loops-this.loop}},$.fn.data=function(t,e){if($.undef(e)&&$.undef(t))return $.cr.getObjData(this.key()).data||{};if($.undef(e)&&"string"==typeof t){var n=$.cr.getObjData(this.key());return n.data&&n.data[t]||""}var r={};return"object"!=typeof t?r[t]=e:r=t,this.each(function(){var t,e,n=$(this);for(var i in n.hasClass("adl-obj")&&((e=$.cr.getObjData(n.key())).data=e.data||{},t=e.data),r)t&&(t[i]=r[i]),this.dataset[i]=r[i]})},$.fn.lineHeight=function(t,e,n){if($.undef(e)){var i,r=this.getStyle("lineHeight");return-1<r.indexOf("px")&&(i=parseFloat(this.getStyle("fontSize")),r=parseFloat(r)/i),Math.round(10*parseFloat(r))/10}this.style(t,e,n)},AdlEventBus.prototype.send=function(t,e){if(e||$.log(t),!$.undef(this.listeners[t])){var n=$.cr.getTimeData();n.event=t;for(var i=this.listeners[t].slice(),r=i.length,a=0;a<r;a++){var s,o=i[a];o&&o.callback&&(s=[n].concat(o.args),o.scope instanceof adlayer&&o.scope.each(function(){o.callback.apply(this,s)}))}}var f;"frame"!=t||(f=$.cr.time)!=this.t&&(this.t=f,this.send(f+"s",1))},$.getRule=function(t,e){$.ruleIndex[e]||(e="obj");var n,i=$.cr.getObjData(t);return i.rules=i.rules||{},i.rules[e]||(n=$.mkSel(t,e),i.rules[e]=$.mkCSS(n,{})),i.rules[e]},$.mkSel=function(t,e){var n=!!e&&$.ruleIndex[e];return n&&(t+=n),".adl-obj-"+t},$.t2p=function(t){return+(100*t).toFixed(4).slice(0,-1)+"%"},$.fn.timeline=function(t){$.cr.obj[this.key()].timeline=t},$.fn.getTL=function(){var t=this.key(),e=$.cr.getObjData(t);return e.timeline=e.timeline||{},e.timeline},$.fn.anim=function(t,e){return $.undef(e)?this.getTL()[t]:this.each(function(){$(this).getTL()[t]=e})},$.fn.setKey=function(i,r,t,e){i=$.pf(i).toFixed(1);var a={};"string"==typeof r?a[r]={v:t,e:e}:a=r,this.each(function(){var t=$(this).getTL();t.keyfr=t.keyfr||{};var e=t.keyfr,n=(i-$.pf(t.start||0)).toFixed(1);for(r in a)e[r]=e[r]||{kf:{}},$.setKeyVal(e[r],n,a[r].v,a[r].e)})},$.setKeyVal=function(t,e,n,i){var r,a;"string"!=typeof n||(r=$.pf(n))+(a=n.replace(r,""))===n&&(n=r,t.unit=a),t.kf[e]=t.kf[e]||{},t.kf[e].v=n,i&&(t.kf[e].e=i)},$.fn.setKeyValue=function(i,r,a){i=$.pf(i).toFixed(1);var s={};"string"==typeof r?s[r]=a:s=r,this.each(function(){var t=$(this).getTL();t.keyfr=t.keyfr||{};var e=t.keyfr,n=(i-$.pf(t.start||0)).toFixed(1);for(r in s)e[r]=e[r]||{kf:{}},$.setKeyVal(e[r],n,a)})},$.fn.getKeys=function(t){var e=this.getTL();return e.keyfr&&e.keyfr[t]&&e.keyfr[t].kf||!1},$.ruleit=function(t){var e="obj",n=t.split("_");return 1<n.length&&(e=n[0],t=n[1]),t=$.cssify(t),"obj"==e&&-1<$.ctstyles.indexOf(t)&&(e="ct"),{rule:e,style:t}},$.fn.style=function(t,e,n){if("adl--stage"==this.key())return this.basestyle(t,e);var i=$.undef(e);return"string"==typeof t&&i?this.getStyle(t):$.undef(n)?this.each(function(){$(this).basestyle(t,e)}):(this.setKeyValue(n,t,e),this.buildTLRules(t))},$.fn.getStyle=function(t){var e,n,i=window.getComputedStyle,r=this.key(),a=t,s=this[0],o="adl--stage";r==o&&"borderRadius"!==t&&-1<t.indexOf("border")?n="curtain":r==o?n="ct":"btext"!==this.type()&&(n=(e=$.ruleit(t)).rule,t=e.style);var f,l,u,c,d,h=$.getRule(r,n),p=$.select(h.selectorText);if(p)return d=i(p)[t],r!==o&&this.getKeys(a)?f=this.getTL().keyfr[a].unit||"":(l=h.style[t],$.undef(l)||""===l||(u=$.pf(l),f=l.replace(u,""))),"%"==f&&("left"==t?t="width":"top"==t&&(t="height"),c=$.pf(i(s.parentNode)[t]),d=$.pf(($.pf(d)/c*100).toFixed(3))+"%"),d},$.fn.basestyle=function(t,e){var n="string"==typeof t;if($.undef(e)&&n)return this.getStyle(t);var s={};return n?s[t]=e:s=t,this.each(function(){var t=$(this),e=t.key();for(var n in s)if(s.hasOwnProperty(n)){var i=s[n],r=$.ruleit(n);"obj"==r.rule&&-1<n.indexOf("padding")&&(r.rule="txt"),"btext"==t.type()&&(r.rule="obj");var a=$.getRule(e,r.rule),n=$.dict[r.style]||r.style;if("adl--stage"==e){if("top"==n||"left"==n)continue;-1<n.indexOf("border")&&($.getRule(e,"curtain").style[n]=i),-1<["width","height"].indexOf(n)?$.getRule(e,"obj").style[n]=i:(n.indexOf("border")<0||0<n.indexOf("adius"))&&($.getRule(e,"ct").style[n]=i)}else 0!=n.indexOf("animation")&&0!=n.indexOf("transform")||(n=$.pfx+n),a.style[n]=i}})},$.trfbase={translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,skewX:0,skewY:0},$.fn.transform=function(n,i,t){if($.undef($.trfbase[n]))return!1;var e=$.undef(i),r="string"==typeof n,a=$.undef(t);if(r&&e){var s=this.getKeys(n);if(s){var o=this.getTL();return a&&(t=$.cr.time),(i=$.getValueAtTime(t-$.pf(o.start),$.fixEasings(s)))+(o.keyfr[n].unit||"")}if("translateX"==n||"translateY"==n)return n="translateX"==n?"left":"top",this.basestyle(n);var f=this.trf();return $.undef(f[n])?$.trfbase[n]:f[n]}return a||"_base"===t?"translateX"==n||"translateY"==n?(n="translateX"==n?"left":"top",this.basestyle(n,i)):this.each(function(){var t=$(this),e=t.trf();e[n]=i,i=$.mkTrfCSS(e),t.basestyle("transform",i),t.buildTLRules(n)}):(this.setKeyValue(t,n,i),this.buildTLRules(n))},$.fn.trf=function(){var t=this.getTL();return t.trf=t.trf||{},t.trf},$.mkTrfCSS=function(t){var e="";for(var n in t)"width"!=n&&"height"!=n&&(e+=n+"("+t[n]+") ");return e+=";",t.width&&(e+="width:"+t.width+";"),t.height&&(e+="height:"+t.height+";"),e},$.mkTrfRule=function(t){var e=t.keyfr;if(e){function n(t,e){d[$.insRule]($.t2p(t)+"{ "+$.pfx+"transform: "+e+$.pfx+"animation-timing-function: linear;}")}var i,r,a,s=$.pf(t.start),o=s+$.pf(t.dur),f=0,l=$.pf($.cr.getTL().duration),u=s/l,c=.033/l,d=t.rules.trf,h="",p={},y={},v=!1,g=$.cr.getStage();g.offsetWidth,g.offsetHeight;for(a in $.trfbase)e[a]&&e[a].kf&&$.okeys(e[a].kf).length?y[a]=$.fixEasings(e[a].kf):t.trf&&t.trf[a]&&t.trf[a]!=$.trfbase[a]&&(y[a]={0:{v:t.trf[a]}});if(e.width&&e.width.kf&&$.okeys(e.width.kf).length&&(y.width=$.fixEasings(e.width.kf)),e.height&&e.height.kf&&$.okeys(e.height.kf).length&&(y.height=$.fixEasings(e.height.kf)),!$.okeys(y).length)return null;do{for(a in y){var m="";e[a]&&(m=e[a].unit),i=$.getValueAtTime(f,y[a]),p[a]=i+(m||"")}r=$.mkTrfCSS(p),0<s&&n(0,r),v=r===h||(v&&n(u-c,h),n(u,r),h=r,!1),f+=.033,u+=c}while(f<o);return r&&(v||o<l)&&n(1,r),r&&-1<r.indexOf("scale")}},$.getValueAtTime=function(t,e){t=+t.toFixed(3);var n=$.okeys(e);n.sort(function(t,e){return t-e});var i=n.length;if(1==i||t<=$.pf(n[0]))return e[n[0]].v;if(t>=$.pf(n[i-1]))return e[n[i-1]].v;for(var r,a,s,o,f,l,u=-1;a=n[++u],s=n[u+1]||t,$.pf(s)<t;);if(l=e[a],t==a)return l.v;r=(t-a)/(s-a),f=$.pf(e[s].v)-$.pf(l.v),o=$.yFromX(r,l.ev[0],l.ev[1],l.ev[2],l.ev[3]);var c=$.pf(l.v)+o*f;return $.pf(c.toFixed(3))},$.yFromX=function(t,e,n,i,r){function a(t){return $.bezier(t,{x:0,y:0},{x:e,y:n},{x:i,y:r},{x:1,y:1})}for(var s=0,o=1,f=(o+s)/2,l=a(f),u=0;u<20&&1e-4<Math.abs(t-l.x);)u++,t>l.x?s=f:o=f,l=a(f=(o+s)/2);return l.y},$.bezier=function(t,e,n,i,r){var a=Math.pow(t,3),s=Math.pow(t,2),o=3*(n.x-e.x),f=3*(i.x-n.x)-o,l=r.x-e.x-o-f,u=3*(n.y-e.y),c=3*(i.y-n.y)-u,d=r.y-e.y-u-c;return{x:l*a+f*s+o*t+e.x,y:d*a+c*s+u*t+e.y}},$.fixEasings=function(t){var e,n,i=$.okeys(t||{});if(!i.length)return t;i.sort(function(t,e){return t-e}),i.reverse();var r=!1,a={};for(e in i){var s,o=t[n=""+i[e]].e||"in-out",f=[0,0,1,1];switch(r&&(f[2]=.58),o){case"in-out":r=!0,f[0]=.42;break;case"in":r=!0;break;case"out":r=!1,f[0]=.42;break;case"lin":r=!1}s="cubic-bezier("+f.join(",")+")",a[n]={e:s,v:t[n].v,ev:f}}return a},$.buildPresetKeyframes=function(t){if(t.keyfr={},t.inanim&&t.inkeyframes){var e=t.inkeyframes;for(var n in t.indur=t.indur||1,e)for(var i in t.keyfr[n]={kf:{}},e[n].unit&&(t.keyfr[n].unit=e[n].unit),e[n].kf){var r=($.pf(i)*$.pf(t.indur)).toFixed(1);t.keyfr[n].kf[r]=e[n].kf[i]}}if(t.outanim&&t.outkeyframes){var a=t.outkeyframes;for(var n in t.outdur=t.outdur||1,a)for(var i in t.keyfr[n]=t.keyfr[n]||{kf:{}},a[n].unit&&(t.keyfr[n].unit=a[n].unit),a[n].kf){r=($.pf(t.dur)-(1-$.pf(i))*$.pf(t.outdur)).toFixed(1);t.keyfr[n].kf[r]=a[n].kf[i]}}return t},$.fn.refreshAnimations=function(){return this.length&&(this.each(function(){this.style.setProperty($.pfx+"animation","none"),this.firstElementChild&&this.firstElementChild.style.setProperty($.pfx+"animation","none")}),$.cr.stage.offsetWidth,this.each(function(){this.style.setProperty($.pfx+"animation",""),this.firstElementChild&&this.firstElementChild.style.setProperty($.pfx+"animation","")})),this},$.fn.buildTLRules=function(V){var X,J,W,Y,q,U;V&&"string"!=typeof V?V=$.okeys(V):V&&(1<Object.keys($.trfbase).indexOf(V)&&(V="trf"),V=[V]),$.cr.format&&(X=$.insRule,W=$.cr.format?"_"+$.cr.format:"",Y=$.pfx+"animation-name: tmp;",q=$.pf($.cr.getTL().duration),U=$.pfx+"animation-timing-function: ",this.each(function(){var t=$(this),e=t.key(),n=$.cr.getObjData(e);if("adl--stage"!=e&&"n"!=n.isactive){var i,r,a=t.type(),s={obj:[]},o="tl_"+e+W,f=t.getTL(),l=!1;if((f.inanim||f.outanim)&&(V=!(l=!0),f=$.buildPresetKeyframes(f)),f.rules){for(var u in f.rules)if(!(V&&V.indexOf(u)<0)&&(A=f.rules[u])&&A.cssRules){for(i=A.cssRules;i.length;){var c=i[i.length-1].keyText,c=+$.pf(c).toFixed(3)+"%";if(!A.findRule(c))break;A.deleteRule(c)}if(i.length)return}}else f.rules={},J=$.mkSel(e),f.rules.obj=$.mkCSS(J,Y),J+=">.adl-obj-content",f.rules.ct=$.mkCSS(J,Y);for(var d=f.rules,h=$.pf(f.start),p=h+$.pf(f.dur),y=h,v=p,g=$(this.parentNode.parentNode),m=!1;"adl--stage"!==g.key();){var k=g.getTL();k.start>y&&(y=k.start),v>k.start+k.dur&&(v=k.start+k.dur),g=$(g[0].parentNode.parentNode)}var b,x,w,j,E,S=0<y?$.t2p(y/q):"0%",O=v<q?$.t2p(v/q):"100%",_=f.keyfr;if(_)for(var C in _){var R=_[C],T=R.kf;if(T&&$.undef($.trfbase[C])&&"width"!=C&&"height"!=C){var L=$.okeys(T);if(L.length){var N=o+"_"+C,F=$.ruleit(C),A=F.rule;if(!V||-1<V.indexOf(C)){d[C]||(d[C]=$.mkKfRule(N));var B=d[C],D=R.unit||"",P="0%",z=$.fixEasings(T);for(var I in L.sort(function(t,e){return t-e}),L){var K,M,H=z[L[I]];$.undef(H.v)||(r=$.pf(L[I]),K=H.v,"opacity"==C&&0==K&&(K=1e-4),M=F.style+":"+K+D+";",0<r+h&&(P=$.t2p((r+h)/q)),0==I&&"0%"!==P&&B[X]("0%{ "+M+"}"),B[X](P+"{"+M+U+H.e+"}"),I==L.length-1&&"100%"!==P&&(r<p&&"100%"!==O&&B[X](O+"{ "+M+"}"),B[X]("100%{"+M+"}")))}}"btext"==a&&(A="obj"),s[A]=s[A]||[],s[A].push(N)}}}for(A in"btext"!==a&&(N=o+"_trf",d.trf||(d.trf=$.mkKfRule(N)),null!==(m=$.mkTrfRule(f))&&s.obj.push(N)),(0<f.start||f.dur<q)&&(N=o+"_vis",d.vis||(d.vis=$.mkKfRule(N)),s.obj.push(N),V||(m=m&&0<y,b=d.vis,x="{"+U+" step-end;",j=(w=m?"opacity: ":"visibility:")+(m?"0":"hidden")+";}",E=w+(m?"1":"visible")+";}","0%"!=S&&b[X]("0%"+x+j),b[X](S+x+E),"100%"!=O&&(b[X](O+"{"+U+" step-start;"+j),b[X]("100%{"+j)))),s)d[A]||($.ruleIndex[A]?(J=$.mkSel(e,A),d[A]=$.mkCSS(J,Y)):A="ct"),d[A].style.setProperty($.pfx+"animation-name",s[A].join(","));l&&delete f.keyfr}}),this.refreshAnimations())},$.mkKfRule=function(t){var e=$.cr.sheet,n=e.cssRules,i="@"+$.pfx+"keyframes "+t+" {}";return e.insertRule(i,n.length),n[n.length-1]};